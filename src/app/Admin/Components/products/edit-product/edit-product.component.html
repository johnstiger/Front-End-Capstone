<div class="container con">

    <form name="form" #FormUpdate="ngForm" (ngSubmit)="submit(FormUpdate.value)">
        <div class="row content">
            <div class="col-md-4 form-group">
                <img class="image" [src]="imageSrc" *ngIf="imageSrc; else default" alt="product-image">
                <ng-template #default>
                    <img class="image" src="{{ image }}" alt="product-image">
                </ng-template>
                <label for="file" class="file-upload">
            <input
            type="file"
            [ngModel]="image"
            name="image"
            class="form-control"
            accept="image/*"
            id="file"
            style="display: none;"
            (change)="onFileChange($event)">
            Select Image
          </label>

            </div>
            <div class="col-md-8 form-group">
                <div *ngIf="errors && errors.name" class="alert alert-danger">
                    *{{ errors.name[0] }}
                </div>
                <input type="text" class="form-control field" name="name" [ngModel]="name" class="form-control" id="" placeholder="Name">
                <div *ngIf="errors && errors.category_id" class="alert alert-danger">
                    *{{ errors.category_id[0] }}
                </div>
                <select name="category_id" [ngModel]="category_id" id="" class="options form-control">
            <option value="" hidden>Category</option>
            <option *ngFor="let category of categories"
    [value]="category.id"
    [attr.selected]="category_id==category.id ? true : null">
  {{category.name}}
</option>
          </select>
                <div class="row">
                    <div class="col">
                        <div *ngIf="errors && errors.price" class="alert alert-danger">
                            *{{ errors.price[0] }}
                        </div>
                        <input type="number" min="0" class="form-control" name="price" [ngModel]="price" id="" placeholder="Price">
                    </div>
                    <div class="col form-group">
                        <div *ngIf="errors && errors.sizes" class="alert alert-danger">
                            *{{ errors.sizes[0] }}
                        </div>

                        <select name="sizes" id="size" class="options field form-control" [ngModel]="sizes" (change)="noSizesChoose($event.target)">
                    <option value="0" hidden>Size</option>
                    <option value="n/a">N/A</option>
                    <option *ngFor="let size of allSize" id="{{ size.id }}" [value]="size.id">{{ size.size }}</option>
                </select>
                    </div>
                    <div class="col">
                        <div *ngIf="errors && errors.unit_measure" class="alert alert-danger">
                            *{{ errors.unit_measure[0] }}
                        </div>
                        <input type="number" min="0" class="form-control" name="unit_measure" id="unit_measure" [ngModel]="unit_measure" placeholder="Quantity">
                    </div>
                    
                    <!-- add size  -->
                    <div class="col">
                        <button type="button" class="btn add-size" (click)="addSize(FormUpdate.value)"><i class="fas fa-plus-circle"></i> Add Size</button>
                    </div>
                </div>
                <div class="row" *ngFor="let product of stockSizes">
                        <div class="col">
                            <input type="text" name="" class="form-control" value="{{ product.size }}" disabled>
                        </div>
                        <div class="col">
                            <input type="text" name="" class="form-control" value="{{ product.pivot.avail_unit_measure }}" disabled>
                        </div>
                        <div class="col">
                            <label for=""></label>
                            <button type="button" class="btn btn-danger" (click)="delete(product)"><i class="far fa-trash-alt"></i> Remove Size</button>
                        </div>
                </div>
                <button type="submit" class="btn btn-success field add-product">Update Product</button>
                <a routerLink="/admin/products" class="btn btn-success field same">Cancel</a>
            </div>
        </div>
    </form>
</div>
